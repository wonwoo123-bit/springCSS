<th:block th:insert="~{modules/header.html}" />


<section class="content-header">
    <div class="container-fluid">
        <div class="row md-2">
            <div class="col-sm-6">
                <h1>상세보기</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item">
                        <a href="list.do">
                            <i class="fa fa-dashboard"></i>자유게시판
                        </a>
                    </li>
                    <li class="breadcrumb-item active">
                        상세보기
                    </li>
                </ol>
            </div>
        </div>
    </div>
</section>


<!-- Main content -->
<section class="content container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="card card-outline card-info">
                <div class="card-header">
                    <h3 class="card-title">상세보기</h3>
                    <div class="card-tools">
                        <th:block th:if="${board.writer} eq ${session.loginUser.id}">
                            <button type="button" id="modifyBtn" class="btn btn-warning"
                                onclick="submit_go('modifyForm');">MODIFY</button>
                            <button type="button" id="removeBtn" class="btn btn-danger"
                                onclick="submit_go('remove');">REMOVE</button>
                        </th:block>
                        <button type="button" id="listBtn" class="btn btn-primary"
                            onclick="CloseWindow();">CLOSE</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="form-group col-sm-12">
                        <label for="title">제 목</label>
                        <span class="form-control" id="title" th:utext="${board.title}" readonly disabled></span>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-4">
                            <label for="writer">작성자</label>
                            <input type="text" class="form-control" id="writer" th:value="${board.writer}" readonly />
                        </div>

                        <div class="form-group col-sm-4">
                            <label for="regDate">작성일</label>
                            <input type="text" class="form-control" id="regDate"
                                th:value="${#dates.format(board.regDate,'yyyy-MM-dd')}" readonly />

                        </div>
                        <div class="form-group col-sm-4">
                            <label for="viewcnt">조회수</label>
                            <input type="text" class="form-control" id="viewcnt" th:value="${board.viewcnt}" readonly />
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <label for="content">내 용</label>
                        <div id="content" th:utext="${board.content}"></div>
                    </div>

                </div>
            </div><!-- end card -->
        </div><!-- end col-md-12 -->
    </div><!-- end row  -->
</section>
<!-- /.content -->


<!-- Reply content -->
<section class="content container-fluid">
    <!-- reply component start -->
    <div class="row">
        <div class="col-md-12">
            <div class="card card-info">
                <div class="card-body">
                    <!-- The time line -->
                    <div class="timeline">
                        <!-- timeline time label -->
                        <div class="time-label" id="repliesDiv">
                            <span class="bg-green">Replies List </span>
                        </div>


                    </div>
                    <div class='text-center'>
                        <ul id="pagination" class="pagination justify-content-center m-0">


                        </ul>
                    </div>
                </div>
                <div class="card-footer">
                    <label for="newReplyText">Reply Text</label>
                    <input class="form-control" type="text" placeholder="REPLY TEXT" id="newReplyText">
                    <br />
                    <button type="button" class="btn btn-primary" id="replyAddBtn" onclick="replyRegist_go();">ADD
                        REPLY</button>
                </div>
            </div>

        </div><!-- end col-md-12 -->
    </div><!-- end row -->
</section>

<!-- /.content -->


<!-- Modal -->
<div id="modifyModal" class="modal modal-default fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="display:none;"></h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body" data-rno>
                <p><input type="text" id="replytext" class="form-control"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" id="replyModBtn" onclick="replyModify_go();">Modify</button>
                <button type="button" class="btn btn-danger" id="replyDelBtn"
                    onclick="replyRemove_go();">DELETE</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<form role="form">
    <input type="hidden" name="bno" th:value="${board.bno}" />
</form>
<th:block th:insert="~{modules/common_js.html}" />

<script>
    var formObj = document.querySelector("form[role='form']");
    function submit_go(url) {

        if (url == "remove" && !confirm("정말로 삭제하시겠습니까?")) {
            return;
        }
        formObj.action = url;
        formObj.submit();
    }
</script>
<th:block th:insert="~{board/reply_js.html}" />
<th:block th:insert="~{modules/footer.html}" />